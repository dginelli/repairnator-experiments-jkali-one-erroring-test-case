language: java

sudo: required

# skip installation step
install: true

services:
 - docker

install:
 - docker pull mongo

before_install:
 sh -e /etc/init.d/xvfb start;

addons:
  sonarcloud:
    organization: "georgesmiley-github"
    token:
      secure:  "Rxct2GiFJclRGTYTc1rj2Ce+/yKXvWJWEr4DQWIuPsQMU6mK+D2rsIKNfpETaiJo+J2Fb2D8GGsvP49rSMhihwqouCze2cpeR5vbOGIdH0IUAXJqR7OE8XDM02E+ewP5j7FgegSusG51/qg2IUuxi557+UyZ+WWMcQSBfjxGm7Up1qwtSdXJ5QXdxG2aX44GqB4mbgY5t+1sLAiyzZ+4AeXd9Qd+BbpCxLrXMXjXzBEvJzw4YrIFHW09L2mrFLKO2EAQOoE3QPds5OgLy47gixCv2xGQvrtCpeRTnc/RiGs+usd2bPjerfJBYgrqsrz2DpVMrNsJfzJ9/atEqmPSDJxp6F6U7KrIhrgHjYwhSpuMUP29tYfyZ7U1P4/oXhbpKU8DnSJOz8qcz0nHcOD7VdpTEK62rclhcdS4qPg76peL71vioL6w7hdO+ndCYP8ASXKk+WS8VyrQfFzlaYEe9o7Z1tS02mxpb/cGZVi+iAJOY+fJmqzuFcgtFSskjexR981tNluDq7Lfc3fv/xSkehaVsHJG5XWMvKJ3FJpa+VgXOFTgZZL2wXArEysFn4INFua52YFYo+DsNHlJN5+kYO2FsmILHJ5P32v3GmcjCS6PGoMMA19bAA8QZjox909bNuwJOVLxe7BjTpqWvhgkXupXH6t/7sD4dwMF9KUmrco="


script:
  - mvn -f guitar-webapp-server/pom.xml clean verify -Pjacoco coveralls:report
  - mvn -f guitar-webapp-server/pom.xml clean verify -Pjacoco sonar:sonar
  - mvn -f guitar-webapp-server/pom.xml clean verify -Pfailsafe
cache:
  directories:
  - $HOME/.m2
