<!DOCTYPE html>
<html lang="en">
<head th:replace="fragments/head" />
<body>

	<!-- Barra de Navegacion superior -->
	<nav th:replace="fragments/nav" />

	<div class="container">
		<h2>Modificar estado incidencia</h2>
		<!--<form class="form-horizontal" method="post" th:action="${'/incidence/modify/' + incidence.id}"> -->
			<div class="form-group">
				<label class="control-label col-sm-2" for="description">Descripcion:</label>
				<div class="col-sm-10">
					<input th:value="${incidence.descripcion}" type="text"
						class="form-control" name="description" readonly="readonly"/>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="pwd">Estado:</label>
				<div class="col-sm-10">
					<input th:value="${incidence.estado}" class="form-control" name="estado" 
						 readonly="readonly" />
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="pwd">Selecciona nuevo estado:</label>
				<select name="selectEstado">
					<option th:each="state : ${listStates}" th:if="state != ${incidence.estado}" th:value="${state}" th:text="${state}"></option>
				</select>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button id="modificarButton" type="submit" class="btn btn-primary">Modificar</button>
					<script th:inline="javascript">
					/*<![CDATA[*/
			 		 	$("#modificarButton").click(function() {
		 					$.post("/incidence/modify/${incidence.id}?newState=$("#selectEstado").val()");
			 		 	});
		 			/*]]>*/
				</script>
				</div>
			</div>
		<!--</form> -->
	</div>

	<footer th:replace="fragments/footer" />
</body>
</html>
