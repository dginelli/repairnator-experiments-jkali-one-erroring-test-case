'use strict';

var pic = require('../pic.js');
var sinon = require('sinon');
var chai = require('chai');
var sinonChai = require('sinon-chai');
var expect = chai.expect;

chai.use(sinonChai);

describe('pic.js', function () {

    var gulp;

    beforeEach(function () {
        gulp = {
            'task': function () {
            }
        };

        sinon.spy(gulp, 'task');
    });

    it('should add a task "incVersion" to gulp', function () {
        pic(gulp, {});
        expect(gulp.task).to.have.been.calledWith('incVersion');
    });

    it('should add a task "updateVersion" to gulp', function () {
        pic(gulp, {});
        expect(gulp.task).to.have.been.calledWith('updateVersion');
    });

    it('should add a task "zip" to gulp', function () {
        pic(gulp, {});
        expect(gulp.task).to.have.been.calledWith('zip');
    });

    it('should add a task "sonar" to gulp', function () {
        pic(gulp, {});
        expect(gulp.task).to.have.been.calledWith('sonar');
    });
});