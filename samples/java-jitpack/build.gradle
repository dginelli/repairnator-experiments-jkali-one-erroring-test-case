buildscript {
  ext {
    javaVersion = "1.8"
    vavrVersion = "0.9.2"
    slf4jVersion = "1.7.25"
    lombokVersion = "1.16.20"
    daggerokContextVersion = "1.5-SNAPSHOT"
  }
}

plugins {
  id "idea"
  id "java"
  id "eclipse"
  id "application"
  id "maven-publish"
  id "com.github.johnrengelman.shadow" version "2.0.2"
}

// JitPack 1:
allprojects {
  repositories {
    maven { url "https://jitpack.io" }
  }
}

group = "daggerok"
version = "0.0.1"
sourceCompatibility = targetCompatibility = "$javaVersion"

mainClassName = "daggerok.App"
shadowJar.mustRunAfter jar

publishing {
  publications {
    shadow(MavenPublication) { publication ->
      project.shadow.component(publication)
    }
  }
  repositories {
    maven {
      url "$buildDir/maven-publish"
    }
  }
}

defaultTasks "clean", "build", "installDist", "distZip", "publish"

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
  // JitPack 2:
  compile "com.github.daggerok:daggerok-context:$daggerokContextVersion"

  compile "io.vavr:vavr:$vavrVersion"

  compile "org.slf4j:slf4j-api:$slf4jVersion"
  // compile "org.slf4j:slf4j-jdk14:$slf4jVersion"
  compile "org.slf4j:jul-to-slf4j:$slf4jVersion"
  compile "org.slf4j:log4j-over-slf4j:$slf4jVersion"
  compile "ch.qos.logback:logback-classic:1.2.3"
  compileOnly "org.projectlombok:lombok:$lombokVersion"

  testCompileOnly("org.projectlombok:lombok:$lombokVersion")
}

task wrapper(type: Wrapper) {
  gradleVersion = "4.6"
  distributionType = "ALL"
}
