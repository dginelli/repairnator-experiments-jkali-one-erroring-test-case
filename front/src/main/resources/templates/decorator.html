<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org" prefix="og: https://ogp.me/ns#">
<head th:include="header"/>
<body class="main">
<div class="container-fluid">
  <div th:replace="${header}"/>
  <div th:replace="${content}"/>
</div>
<footer th:include="${footerTemplate}" class="mt-3"></footer>
</body>
<script th:inline="javascript">
  var widgetNames = [[${widgetNames}]];
  var pageName = [[${pageName}]];
  widgetNames.forEach(function (widgetName) {
    var widgetDiv = $("#widget_" + widgetName);
    if (widgetDiv) {
      var url = "/widgets/" + widgetName + "?pageName=" + pageName;
      $.get(url, function (data) {
        widgetDiv.html(data);
      });
    }
  });

  function reloadWidget(widgetName, pageNumber) {
    var widgetDiv = $("#widget_" + widgetName);
    if (widgetDiv) {
      var url = "/widgets/" + widgetName + "?pageName=" + pageName + "&p=" + pageNumber;
      $.get(url, function (data) {
        widgetDiv.html(data);
      });
    }
  }

</script>
</html>